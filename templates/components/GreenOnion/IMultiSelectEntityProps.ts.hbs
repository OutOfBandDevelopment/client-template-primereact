import type { MultiSelectProps } from 'primereact/multiselect';
import type { Control, FieldValues, RegisterOptions, UseFormSetValue } from 'react-hook-form';

export interface IMultiSelectEntityOption<TEntity> {
  value: number;
  label: string;
  entity?: TEntity;
}

export interface IMultiSelectEntityProps<
  TEntity,
  TFormValues extends FieldValues = FieldValues
> extends Omit<
  MultiSelectProps,
  'options' | 'optionLabel' | 'optionValue' | 'loading' | 'onChange' | 'value'
> {
  /** Currently selected IDs */
  value?: number[];
  /** Handler for selection change (IDs only) */
  onChange?: (values: number[]) => void;
  /** Handler for full entity selection change */
  onEntityChange?: (entities: TEntity[]) => void;
  /** Handler for primary text field change */
  onTextChange?: (texts: string[]) => void;
  /** Placeholder text when no value is selected */
  placeholder?: string;
  /** CSS class name for styling */
  className?: string;
  /** Whether the multiselect is disabled */
  disabled?: boolean;
  /** React Hook Form control object */
  control?: Control<TFormValues>;
  /** React Hook Form setValue function */
  setValue?: UseFormSetValue<TFormValues>;
  /** Form field name for IDs binding */
  name?: string;
  /** Form field name for entities binding */
  entityName?: string;
  /** Form field name for texts binding */
  textName?: string;
  /** Whether the field is required */
  required?: boolean;
  /** Additional validation options for React Hook Form */
  rules?: RegisterOptions<TFormValues>;
  /** Error callback */
  onLoadError?: (error: string) => void;
}